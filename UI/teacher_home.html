<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="teacher_home.css">
    <title>Course System</title>
</head>
<body >
    <div>
        <header>
            <h1>COURSE MANAGEMENT SYSTEM</h1>
        </header> 
    </div>
    <div class="userbar">
        <a href="#" id="createCourse">Create a Course</a>
        <a href="#" id="message">Message</a>
        <a href="#" id="user" onload="loginUser()"> user</a>
    </div>
    <div id="courseList"></div>
    <div id="editInfo">
        <div class="editInformation">
            
            <form action="">
                <h3>Edit your information</h3>
                <label for="fname">First name</label>
                <input type="text" id="fname" placeholder="First name">
                <label for="mname">Middle name</label>
                <input type="text" id="mname" placeholder="Middle name">
                <label for="lname">Last name</label>
                <input type="text" id="lname" placeholder="Last name">
                <label for="email">Email</label>
                <input type="email" id="email" placeholder="email"> 
                <label for="phone">Phone</label>
                <input type="number" id="phone" placeholder="Phone number">
                <label for="userType">User type</label>
                <select name="userType" id="userType">
                    <option value="teacher">Teacher</option>
                    <option value="student">Student</option>
                </select>
                <label for="password">Password</label>
                <input type="password" id="password" placeholder="Password">
                <label for="passwordConfirm">Password confirm</label>
                <input type="password" id="passwordConfirm" placeholder="Password Confirm">
                <input type="submit" value="Save">
                <input type="button" id="cancel3" value="Cancel">
            </form>
        </div>
    </div>
    <div id="create">
        <div class="course">
            <form action="/create" method="POST">
               <h3>Create a new course</h3>
               <label for="courseName">Course Name</label>
               <input type="text" id="courseName" required name="courseName">
               <label for="content">Content</label>
               <input type="textarea" id="content" required name="courseContent">
               <label for="credits">Credits</label>
               <input type="text" id="credits" required name="credits">
               <label for="courses">Number of lectures</label>
               <input type="number" id="courses" required name="numberOfLectures">
               <label for="exam">Exam Date</label>
               <input type="date" id="exam" required name="examDate">
               <input type="submit" value="Create">
               <input type="button" id="cancel4" value="Cancel">
            </form>
        </div>
    </div>


    

    <div>
        <footer>
            <a href="http://">OAMK.fi</a>
            <a href="http://">Oiva</a>
            <a href="http://">Peppi</a>
            <a href="http://">Library</a>
            <a href="http://">Help</a>
        </footer>
    </div>
    <script>
     
         
        document.getElementById("user").addEventListener("click",function(){
            document.querySelector("#editInfo").style.display="flex";
    });
        document.getElementById("cancel3").addEventListener("click",function(){
            document.querySelector("#editInfo").style.display="none";
    })

    document.getElementById("createCourse").addEventListener("click",function(){
            document.querySelector("#create").style.display="flex";
    });
        document.getElementById("cancel4").addEventListener("click",function(){
            document.querySelector("#create").style.display="none";
    });

    
    /*function loadJason(){
        let userEmail=localStorage.getItem("userEmail");
        document.getElementById("user").innerText=userEmail;
        //create XHR Object
        var xhr = new XMLHttpRequest();
        //open -type, url/file,async
        xhr.open("GET", 'https://stark-ridge-06549.herokuapp.com/db2', true);
        xhr.onload=function(){
            if(this.status==200){
                var courses=JSON.parse (this.responseText);
                var output='';
                for(var i in courses){
                    output+='<ul>'+
                        '<li> COURSE:'+courses[i].coursename+'</li>'+
                        '</ul>';
                }
               
              document.getElementById("courseList").innerHTML=output;
            }
    }
    //send request
    xhr.send();
}
*/
// get login user information 
function loginUser(){
    let userEmail=localStorage.getItem("userEmail");
        //create XHR Object
        var xhr = new XMLHttpRequest();
        //open -type, url/file,async
        xhr.open("GET", 'https://stark-ridge-06549.herokuapp.com/db', true);
        xhr.onload=function(){
            if(this.status==200){
                var userInfo=JSON.parse (this.responseText);

                
                var userIndex=userInfo.map(object => object.email).indexOf(userEmail);
                var username=userInfo[userIndex].fname;
                
                document.getElementById("user").innerText=username;
            }
    }
    //send request
    xhr.send();
}





    </script>
</body>
</html>